!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.formInputSelector,this._submitButtonSelector=e.formSubmitButtonSelector,this._inactiveButtonClass=e.formSubmitInactiveClass,this._inputErrorClass=e.formInputErrorClass,this._errorClass=e.formInputErrorActiveClass,this._form=t}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._disableButton(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",e.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscape=this._handleEscape.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscape)}_handleEscape(e){"Escape"===e.key&&this.close()}_handlePopupClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>this._handlePopupClose(e)))}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=s}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const n={formInputSelector:".modal__form-input",formSubmitButtonSelector:".modal__submit-button",formSubmitInactiveClass:"modal__submit-button_disabled",formInputErrorClass:"modal__form-input_type_error",formInputErrorActiveClass:"modal__error_visible"},r=document.querySelector("#profile-edit-form"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-job"),document.querySelector("#profile-edit-button")),o=document.querySelector("#new-card-form"),a=document.querySelector("#new-card-add-button"),l=(new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._handleResponse)}getAPIInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleResponse)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteUserCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}addCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}removeCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"ae2a222f-f992-4644-9116-ee81d5f8ba63","Content-Type":"application/json"}}),new e(n,r)),h=new e(n,o);h.enableValidation(),l.enableValidation();const d=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile-name",jobSelector:"#profile-job"}),c=new class extends t{constructor(e){super(e),this._previewModalImage=this._popupElement.querySelector(".modal__preview-image"),this._previewModalCaption=this._popupElement.querySelector(".modal__preview-caption")}open(e){let{name:t,link:s}=e;this._previewModalCaption.textContent=t,this._previewModalImage.src=s,this._previewModalImage.alt=t,super.open()}}({popupSelector:"#preview-image-modal"});c.setEventListeners();const u=e=>{const{name:t,link:s}=e,n=new class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardData=e,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_is-active")}_handleDeleteIcon(){this._cardElement.remove(),this._cardElement=null}_getCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getCardTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._addCardTitle=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage.src=this._link,this._cardImage.alt=`A photo of ${this._name}`,this._addCardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}({name:t,link:s},"#card-template",(e=>{let{name:t,link:s}=e;c.open({name:t,link:s})}));return n.getView()},_=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Grand Teton",link:"https://source.unsplash.com/9nUcpfu476M/"},{name:"Antelope Canyon",link:"https://source.unsplash.com/7he8rO3qdsc"},{name:"Glacier National Park",link:"https://source.unsplash.com/qsngjpG5I5s"},{name:"Yosemite National Park",link:"https://source.unsplash.com/UCd78vfC8vU"},{name:"Rockey Mountain National Park",link:"https://source.unsplash.com/pq2DJBntZW0"},{name:"Zion National Park",link:"https://source.unsplash.com/tvg2AeJHfbM"}],renderer:e=>{_.addItem(u(e))}},"#card-section");_.renderItems();const m=new s({popupSelector:"#new-card-modal",handleFormSubmit:e=>{_.addItem(u(e))}});m.setEventListeners(),a.addEventListener("click",(function(){h.resetValidation(),m.open()}));const p=new s({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{d.setUserInfo(e)}});p.setEventListeners(),i.addEventListener("click",(function(){const e=d.getUserInfo();p.setInputValues(e),l.resetValidation(),p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sd0JBQ05tQyxLQUFNLDJDQUVSLENBQ0VuQyxLQUFNLHlCQUNObUMsS0FBTSwyQ0FFUixDQUNFbkMsS0FBTSxnQ0FDTm1DLEtBQU0sMkNBRVIsQ0FDRW5DLEtBQU0scUJBQ05tQyxLQUFNLDRDQ3lDTitDLFNBQVd4QixJQUNUcUIsRUFBWVEsUUFBUTlCLEVBQVdDLEdBQU0sR0R4QjVCLGlCQzhCZnFCLEVBQVlPLGNBR1osTUFBTUcsRUFBZSxJQUFJbkcsRUFBYyxDQUNyQ2IsY0RqQ2Msa0JDa0NkYyxpQkFBbUJtRyxJQUNqQlgsRUFBWVEsUUFBUTlCLEVBQVdpQyxHQUFVLElBSTdDRCxFQUFhcEcsb0JBRWJrQixFQUFpQnRELGlCQUFpQixTQUFTLFdBQ3pDMkYsRUFBaUJ0RSxrQkFDakJtSCxFQUFhM0csTUFDZixJQUdBLE1BQU02RyxFQUFtQixJQUFJckcsRUFBYyxDQUN6Q2IsY0RwRGtCLHNCQ3FEbEJjLGlCQUFtQm1HLElBQ2pCN0MsRUFBU00sWUFBWXVDLEVBQVMsSUFJbENDLEVBQWlCdEcsb0JBRWpCZ0IsRUFBa0JwRCxpQkFBaUIsU0FBUyxXQUMxQyxNQUFNMkksRUFBTy9DLEVBQVN6QixjQUN0QnVFLEVBQWlCekYsZUFBZTBGLEdBQ2hDcEYsRUFBa0JsQyxrQkFDbEJxSCxFQUFpQjdHLE1BQ25CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybUlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVN1Ym1pdEluYWN0aXZlQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1JbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY2FwZSA9IHRoaXMuX2hhbmRsZUVzY2FwZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGUpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NhcGUoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlUG9wdXBDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHRoaXMuX2hhbmRsZVBvcHVwQ2xvc2UoZXZ0KSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLy8gSW5pdGlhbCBDYXJkIERhdGFcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkdyYW5kIFRldG9uXCIsXG4gICAgbGluazogXCJodHRwczovL3NvdXJjZS51bnNwbGFzaC5jb20vOW5VY3BmdTQ3Nk0vXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFudGVsb3BlIENhbnlvblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tLzdoZThyTzNxZHNjXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdsYWNpZXIgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tL3FzbmdqcEc1STVzXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS9VQ2Q3OHZmQzh2VVwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSb2NrZXkgTW91bnRhaW4gTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tL3BxMkRKQm50WlcwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlppb24gTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tL3R2ZzJBZUpIZmJNXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtSW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcbiAgZm9ybVN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBmb3JtU3VibWl0SW5hY3RpdmVDbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBmb3JtSW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcbiAgZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgcHJvZmlsZU5hbWU6IFwiI3Byb2ZpbGUtbmFtZVwiLFxuICBwcm9maWxlSm9iOiBcIiNwcm9maWxlLWpvYlwiLFxuICBwcm9maWxlRWRpdE1vZGFsOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgcHJldmlld0ltYWdlTW9kYWw6IFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIixcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIGNhcmRTZWN0aW9uOiBcIiNjYXJkLXNlY3Rpb25cIixcbiAgbmV3Q2FyZE1vZGFsOiBcIiNuZXctY2FyZC1tb2RhbFwiLFxufTtcblxuLy8qIFByb2ZpbGUgRWxlbWVudHNcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1qb2JcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5cbi8vKiBOZXcgQ2FyZCBFbGVtZW50c1xuZXhwb3J0IGNvbnN0IG5ld0NhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctY2FyZC1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IG5ld0NhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1jYXJkLWFkZC1idXR0b25cIik7XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIG5ld0NhcmRGb3JtLFxuICBuZXdDYXJkQWRkQnV0dG9uLFxuICBzZWxlY3RvcnMsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8qIEFQSVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJhZTJhMjIyZi1mOTkyLTQ2NDQtOTExNi1lZTgxZDVmOGJhNjNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLyogRm9ybSBWYWxpZGF0b3JzXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgbmV3Q2FyZEZvcm0pO1xuXG4vL1RPRE8gQWRkIGluIHRoZSBhdmF0YXIgZm9ybSB2YWxpZGF0b3Igd2hlbiB0aGUgZnVuY3Rpb25hbGl0eSBpcyBidWlsdFxuXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8vVE9ETyBFbmFibGUgdGhlIGF2YXRhciBmb3JtIHZhbGlkYXRvciB3aGVuIHRoZSBmdW5jdGlvbmFsaXR5IGlzIGJ1aWx0XG5cbi8vKiBDbGFzc2VzXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVOYW1lLFxuICBqb2JTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVKb2IsXG4gIC8vVE9ETyBBZGQgaW4gdGhlIGF2YXRhciBzZWxlY3RvciB3aGVuIHRoZSBmdW5jdGlvbmFsaXR5IGlzIGJ1aWx0XG59KTtcblxuLy8qIFByZXZpZXcgSW1hZ2UgUG9wdXBcbmNvbnN0IGNhcmRQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJldmlld0ltYWdlTW9kYWwsXG59KTtcblxuY2FyZFByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyogUmVuZGVyIHRoZSBDYXJkc1xuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gaXRlbTtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHsgbmFtZSwgbGluayB9LCBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLCAoeyBuYW1lLCBsaW5rIH0pID0+IHtcbiAgICBjYXJkUHJldmlld1BvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xuICB9KTtcblxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59O1xuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgc2VsZWN0b3JzLmNhcmRTZWN0aW9uXG4pO1xuXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyogUHJvZmlsZSBBZGQgQ2FyZCBQb3B1cFxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMubmV3Q2FyZE1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZm9ybURhdGEpKTtcbiAgfSxcbn0pO1xuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxubmV3Q2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbi8vKiBQcm9maWxlIEVkaXQgUG9wdXBcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlRWRpdE1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhmb3JtRGF0YSk7XG4gIH0sXG59KTtcblxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyhpbmZvKTtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgLy8qIEhhbmRsZSB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXG4gIC8vVE9ETyBBZGQgaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvLyogR2V0IHRoZSBpbml0aWFsIGNhcmRzIGZyb20gdGhlIHNlcnZlclxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8qIFByb21pc2UgQWxsIHRvIGdldCB0aGUgaW5pdGlhbCB1c2VyIGluZm8gYW5kIGNhcmRzXG4gIC8vVE9ETyBBZGQgaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgZ2V0QVBJSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgLy8qIFVwZGF0ZSB0aGUgdXNlciBwcm9maWxlIGluZm9cbiAgLy9UT0RPIEFkZCBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBmdW5jdGlvbiBiZWxvd1xuICB1cGRhdGVQcm9maWxlSW5mbyh1c2VyRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvLyogQWRkIGEgbmV3IGNhcmQgdG8gdGhlIHNlcnZlclxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vKiBEZWxldGUgYSBjYXJkIGZyb20gdGhlIHNlcnZlclxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIGRlbGV0ZVVzZXJDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8qIEFkZCBhIGxpa2UgdG8gYSBjYXJkXG4gIC8vVE9ETyBBZGQgaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgYWRkQ2FyZExpa2VzKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8qIFJlbW92ZSBhIGxpa2UgZnJvbSBhIGNhcmRcbiAgLy9UT0RPIEFkZCBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBmdW5jdGlvbiBiZWxvd1xuICByZW1vdmVDYXJkTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvLyogVXBkYXRlIHRoZSB1c2VyIHByb2ZpbGUgYXZhdGFyXG4gIC8vVE9ETyBCdWlsZCB0aGUgZnVuY3Rpb24gYmVsb3cgYW5kIGFkZCBpbiB0aGUgY29tbWVudHNcbiAgdXBkYXRlUHJvZmlsZUF2YXRhcihhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3ByZXZpZXdNb2RhbEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgdGhpcy5fcHJldmlld01vZGFsQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWNhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fcHJldmlld01vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJldmlld01vZGFsSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wcmV2aWV3TW9kYWxJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcblxuICAgIHRoaXMuX2NhcmREYXRhID0gY2FyZERhdGE7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlSWNvbigpKTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2dldENhcmRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRDYXJkVGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2FkZENhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBBIHBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xuICAgIHRoaXMuX2FkZENhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImZvcm1JbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9ybVN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJmb3JtU3VibWl0SW5hY3RpdmVDbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJmb3JtSW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJmb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzIiwiX2Zvcm0iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9kaXNhYmxlQnV0dG9uIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZW5hYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY2FwZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2hhbmRsZVBvcHVwQ2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVFZGl0QnV0dG9uIiwibmV3Q2FyZEZvcm0iLCJuZXdDYXJkQWRkQnV0dG9uIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfaGFuZGxlUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRBUElJbmZvIiwiYWxsIiwidXBkYXRlUHJvZmlsZUluZm8iLCJ1c2VyRGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhZGROZXdDYXJkIiwiX3JlZjIiLCJsaW5rIiwiZGVsZXRlVXNlckNhcmQiLCJjYXJkSWQiLCJhZGRDYXJkTGlrZXMiLCJyZW1vdmVDYXJkTGlrZXMiLCJ1cGRhdGVQcm9maWxlQXZhdGFyIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50Iiwiam9iIiwic2V0VXNlckluZm8iLCJjYXJkUHJldmlld1BvcHVwIiwiX3ByZXZpZXdNb2RhbEltYWdlIiwiX3ByZXZpZXdNb2RhbENhcHRpb24iLCJzcmMiLCJhbHQiLCJjcmVhdGVDYXJkIiwiaXRlbSIsImNhcmQiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmREYXRhIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRMaWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2NhcmRFbGVtZW50IiwiX2hhbmRsZURlbGV0ZUljb24iLCJfY2FyZEltYWdlIiwidG9nZ2xlIiwiX2dldENhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2FkZENhcmRUaXRsZSIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsInByZXBlbmQiLCJhZGRDYXJkUG9wdXAiLCJmb3JtRGF0YSIsImVkaXRQcm9maWxlUG9wdXAiLCJpbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==