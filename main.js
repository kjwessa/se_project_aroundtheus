!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.formInputSelector,this._submitButtonSelector=e.formSubmitButtonSelector,this._inactiveButtonClass=e.formSubmitInactiveClass,this._inputErrorClass=e.formInputErrorClass,this._errorClass=e.formInputErrorActiveClass,this._form=t}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._disableButton(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",e.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscape=this._handleEscape.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscape)}_handleEscape(e){"Escape"===e.key&&this.close()}_handlePopupClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>this._handlePopupClose(e)))}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=s}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const n={formInputSelector:".modal__form-input",formSubmitButtonSelector:".modal__submit-button",formSubmitInactiveClass:"modal__submit-button_disabled",formInputErrorClass:"modal__form-input_type_error",formInputErrorActiveClass:"modal__error_visible"},r=document.querySelector("#profile-edit-form"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-job"),document.querySelector("#profile-edit-button")),o=document.querySelector("#new-card-form"),a=document.querySelector("#new-card-add-button"),l=(new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._handleResponse)}getAPIInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleResponse)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteUserCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}addCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}removeCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}updateProfileAvatar(){}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"ae2a222f-f992-4644-9116-ee81d5f8ba63","Content-Type":"application/json"}}),new e(n,r)),h=new e(n,o);h.enableValidation(),l.enableValidation();const d=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile-name",jobSelector:"#profile-job"}),c=new class extends t{constructor(e){super(e),this._previewModalImage=this._popupElement.querySelector(".modal__preview-image"),this._previewModalCaption=this._popupElement.querySelector(".modal__preview-caption")}open(e){let{name:t,link:s}=e;this._previewModalCaption.textContent=t,this._previewModalImage.src=s,this._previewModalImage.alt=t,super.open()}}({popupSelector:"#preview-image-modal"});c.setEventListeners();const u=e=>{const{name:t,link:s}=e,n=new class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardData=e,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_is-active")}_handleDeleteIcon(){this._cardElement.remove(),this._cardElement=null}_getCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getCardTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._addCardTitle=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage.src=this._link,this._cardImage.alt=`A photo of ${this._name}`,this._addCardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}({name:t,link:s},"#card-template",(e=>{let{name:t,link:s}=e;c.open({name:t,link:s})}));return n.getView()},m=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Grand Teton",link:"https://source.unsplash.com/9nUcpfu476M/"},{name:"Antelope Canyon",link:"https://source.unsplash.com/7he8rO3qdsc"},{name:"Glacier National Park",link:"https://source.unsplash.com/qsngjpG5I5s"},{name:"Yosemite National Park",link:"https://source.unsplash.com/UCd78vfC8vU"},{name:"Rockey Mountain National Park",link:"https://source.unsplash.com/pq2DJBntZW0"},{name:"Zion National Park",link:"https://source.unsplash.com/tvg2AeJHfbM"}],renderer:e=>{m.addItem(u(e))}},"#card-section");m.renderItems();const _=new s({popupSelector:"#new-card-modal",handleFormSubmit:e=>{m.addItem(u(e))}});_.setEventListeners(),a.addEventListener("click",(function(){h.resetValidation(),_.open()}));const p=new s({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{d.setUserInfo(e)}});p.setEventListeners(),i.addEventListener("click",(function(){const e=d.getUserInfo();p.setInputValues(e),l.resetValidation(),p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVlRLFFBQVE5QixFQUFXQyxHQUFNLEdEeEI1QixpQkM4QmZxQixFQUFZTyxjQUdaLE1BQU1HLEVBQWUsSUFBSWxHLEVBQWMsQ0FDckNiLGNEakNjLGtCQ2tDZGMsaUJBQW1Ca0csSUFDakJYLEVBQVlRLFFBQVE5QixFQUFXaUMsR0FBVSxJQUk3Q0QsRUFBYW5HLG9CQUVia0IsRUFBaUJ0RCxpQkFBaUIsU0FBUyxXQUN6QzBGLEVBQWlCckUsa0JBQ2pCa0gsRUFBYTFHLE1BQ2YsSUFHQSxNQUFNNEcsRUFBbUIsSUFBSXBHLEVBQWMsQ0FDekNiLGNEcERrQixzQkNxRGxCYyxpQkFBbUJrRyxJQUNqQjdDLEVBQVNNLFlBQVl1QyxFQUFTLElBSWxDQyxFQUFpQnJHLG9CQUVqQmdCLEVBQWtCcEQsaUJBQWlCLFNBQVMsV0FDMUMsTUFBTTBJLEVBQU8vQyxFQUFTeEIsY0FDdEJzRSxFQUFpQnhGLGVBQWV5RixHQUNoQ25GLEVBQWtCbEMsa0JBQ2xCb0gsRUFBaUI1RyxNQUNuQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1JbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1TdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1TdWJtaXRJbmFjdGl2ZUNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtSW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGUgPSB0aGlzLl9oYW5kbGVFc2NhcGUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjYXBlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZVBvcHVwQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB0aGlzLl9oYW5kbGVQb3B1cENsb3NlKGV2dCkpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIEluaXRpYWwgQ2FyZCBEYXRhXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJHcmFuZCBUZXRvblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tLzluVWNwZnU0NzZNL1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbnRlbG9wZSBDYW55b25cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS83aGU4ck8zcWRzY1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJHbGFjaWVyIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS9xc25nanBHNUk1c1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3NvdXJjZS51bnNwbGFzaC5jb20vVUNkNzh2ZkM4dlVcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUm9ja2V5IE1vdW50YWluIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS9wcTJESkJudFpXMFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJaaW9uIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS90dmcyQWVKSGZiTVwiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybUlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXG4gIGZvcm1TdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIixcbiAgZm9ybVN1Ym1pdEluYWN0aXZlQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgZm9ybUlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGZvcm1JbnB1dEVycm9yQWN0aXZlQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIHByb2ZpbGVOYW1lOiBcIiNwcm9maWxlLW5hbWVcIixcbiAgcHJvZmlsZUpvYjogXCIjcHJvZmlsZS1qb2JcIixcbiAgcHJvZmlsZUVkaXRNb2RhbDogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIHByZXZpZXdJbWFnZU1vZGFsOiBcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBjYXJkU2VjdGlvbjogXCIjY2FyZC1zZWN0aW9uXCIsXG4gIG5ld0NhcmRNb2RhbDogXCIjbmV3LWNhcmQtbW9kYWxcIixcbn07XG5cbi8vKiBQcm9maWxlIEVsZW1lbnRzXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtam9iXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuXG4vLyogTmV3IENhcmQgRWxlbWVudHNcbmV4cG9ydCBjb25zdCBuZXdDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBuZXdDYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctY2FyZC1hZGQtYnV0dG9uXCIpO1xuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBuZXdDYXJkRm9ybSxcbiAgbmV3Q2FyZEFkZEJ1dHRvbixcbiAgc2VsZWN0b3JzLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vKiBBUElcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiYWUyYTIyMmYtZjk5Mi00NjQ0LTkxMTYtZWU4MWQ1ZjhiYTYzXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8qIEZvcm0gVmFsaWRhdG9yc1xuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIHByb2ZpbGVFZGl0Rm9ybSk7XG5cbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIG5ld0NhcmRGb3JtKTtcblxuLy9UT0RPIEFkZCBpbiB0aGUgYXZhdGFyIGZvcm0gdmFsaWRhdG9yIHdoZW4gdGhlIGZ1bmN0aW9uYWxpdHkgaXMgYnVpbHRcblxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4vL1RPRE8gRW5hYmxlIHRoZSBhdmF0YXIgZm9ybSB2YWxpZGF0b3Igd2hlbiB0aGUgZnVuY3Rpb25hbGl0eSBpcyBidWlsdFxuXG4vLyogQ2xhc3Nlc1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlTmFtZSxcbiAgam9iU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlSm9iLFxuICAvL1RPRE8gQWRkIGluIHRoZSBhdmF0YXIgc2VsZWN0b3Igd2hlbiB0aGUgZnVuY3Rpb25hbGl0eSBpcyBidWlsdFxufSk7XG5cbi8vKiBQcmV2aWV3IEltYWdlIFBvcHVwXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLnByZXZpZXdJbWFnZU1vZGFsLFxufSk7XG5cbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8qIFJlbmRlciB0aGUgQ2FyZHNcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGxpbmsgfSA9IGl0ZW07XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7IG5hbWUsIGxpbmsgfSwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSwgKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICAgIH0sXG4gIH0sXG4gIHNlbGVjdG9ycy5jYXJkU2VjdGlvblxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy8qIFByb2ZpbGUgQWRkIENhcmQgUG9wdXBcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLm5ld0NhcmRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGZvcm1EYXRhKSk7XG4gIH0sXG59KTtcblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbm5ld0NhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyogUHJvZmlsZSBFZGl0IFBvcHVwXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJvZmlsZUVkaXRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEpO1xuICB9LFxufSk7XG5cbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXMoaW5mbyk7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIC8vKiBIYW5kbGUgdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLy9UT0RPIEFkZCBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBmdW5jdGlvbiBiZWxvd1xuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8qIEdldCB0aGUgaW5pdGlhbCBjYXJkcyBmcm9tIHRoZSBzZXJ2ZXJcbiAgLy9UT0RPIEFkZCBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBmdW5jdGlvbiBiZWxvd1xuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vKiBQcm9taXNlIEFsbCB0byBnZXQgdGhlIGluaXRpYWwgdXNlciBpbmZvIGFuZCBjYXJkc1xuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIGdldEFQSUluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcbiAgfVxuXG4gIC8vKiBVcGRhdGUgdGhlIHVzZXIgcHJvZmlsZSBpbmZvXG4gIC8vVE9ETyBBZGQgaW4gdGhlIGNvbW1lbnRzIGZvciB0aGUgZnVuY3Rpb24gYmVsb3dcbiAgdXBkYXRlUHJvZmlsZUluZm8odXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy9UT0RPIEFkZCBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBmdW5jdGlvbiBiZWxvd1xuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIGRlbGV0ZVVzZXJDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy9UT0RPIEFkZCBpbiB0aGUgY29tbWVudHMgZm9yIHRoZSBmdW5jdGlvbiBiZWxvd1xuICBhZGRDYXJkTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvL1RPRE8gQWRkIGluIHRoZSBjb21tZW50cyBmb3IgdGhlIGZ1bmN0aW9uIGJlbG93XG4gIHJlbW92ZUNhcmRMaWtlcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vVE9ETyBCdWlsZCB0aGUgZnVuY3Rpb24gYmVsb3cgYW5kIGFkZCBpbiB0aGUgY29tbWVudHNcbiAgdXBkYXRlUHJvZmlsZUF2YXRhcigpIHt9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcmV2aWV3TW9kYWxJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuX3ByZXZpZXdNb2RhbENhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlldy1jYXB0aW9uXCIpO1xuICB9XG5cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX3ByZXZpZXdNb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdNb2RhbEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcHJldmlld01vZGFsSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG5cbiAgICB0aGlzLl9jYXJkRGF0YSA9IGNhcmREYXRhO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRDYXJkVGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9hZGRDYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBgQSBwaG90byBvZiAke3RoaXMuX25hbWV9YDtcbiAgICB0aGlzLl9hZGRDYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJmb3JtSW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsImZvcm1TdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZm9ybVN1Ym1pdEluYWN0aXZlQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiZm9ybUlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcyIsIl9mb3JtIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lucHV0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJfZGlzYWJsZUJ1dHRvbiIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0IiwiX2VuYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NhcGUiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIl9oYW5kbGVQb3B1cENsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJwcm9maWxlRWRpdEZvcm0iLCJwcm9maWxlRWRpdEJ1dHRvbiIsIm5ld0NhcmRGb3JtIiwibmV3Q2FyZEFkZEJ1dHRvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2hhbmRsZVJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0QVBJSW5mbyIsImFsbCIsInVwZGF0ZVByb2ZpbGVJbmZvIiwidXNlckRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkTmV3Q2FyZCIsIl9yZWYyIiwibGluayIsImRlbGV0ZVVzZXJDYXJkIiwiY2FyZElkIiwiYWRkQ2FyZExpa2VzIiwicmVtb3ZlQ2FyZExpa2VzIiwidXBkYXRlUHJvZmlsZUF2YXRhciIsImF1dGhvcml6YXRpb24iLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImpvYiIsInNldFVzZXJJbmZvIiwiY2FyZFByZXZpZXdQb3B1cCIsIl9wcmV2aWV3TW9kYWxJbWFnZSIsIl9wcmV2aWV3TW9kYWxDYXB0aW9uIiwic3JjIiwiYWx0IiwiY3JlYXRlQ2FyZCIsIml0ZW0iLCJjYXJkIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9jYXJkRGF0YSIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlSWNvbiIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVEZWxldGVJY29uIiwiX2NhcmRJbWFnZSIsInRvZ2dsZSIsIl9nZXRDYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIl9hZGRDYXJkVGl0bGUiLCJjYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiYWRkQ2FyZFBvcHVwIiwiZm9ybURhdGEiLCJlZGl0UHJvZmlsZVBvcHVwIiwiaW5mbyJdLCJzb3VyY2VSb290IjoiIn0=