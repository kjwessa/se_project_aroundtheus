!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.formInputSelector,this._submitButtonSelector=e.formSubmitButtonSelector,this._inactiveButtonClass=e.formSubmitInactiveClass,this._inputErrorClass=e.formInputErrorClass,this._errorClass=e.formInputErrorActiveClass,this._form=t}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._disableButton(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,e.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",e.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscape=this._handleEscape.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscape)}_handleEscape(e){"Escape"===e.key&&this.close()}_handlePopupClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>this._handlePopupClose(e)))}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=s}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const n={formInputSelector:".modal__form-input",formSubmitButtonSelector:".modal__submit-button",formSubmitInactiveClass:"modal__submit-button_disabled",formInputErrorClass:"modal__form-input_type_error",formInputErrorActiveClass:"modal__error_visible"},o=document.querySelector("#profile-edit-form"),i=(document.querySelector("#profile-name"),document.querySelector("#profile-job"),document.querySelector("#profile-edit-button")),r=document.querySelector("#new-card-form"),a=document.querySelector("#new-card-add-button"),l=new e(n,o),c=new e(n,r);c.enableValidation(),l.enableValidation();const u=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile-name",jobSelector:"#profile-job"}),d=new class extends t{constructor(e){super(e),this._previewModalImage=this._popupElement.querySelector(".modal__preview-image"),this._previewModalCaption=this._popupElement.querySelector(".modal__preview-caption")}open(e){let{name:t,link:s}=e;this._previewModalCaption.textContent=t,this._previewModalImage.src=s,this._previewModalImage.alt=t,super.open()}}({popupSelector:"#preview-image-modal"});d.setEventListeners();const m=e=>{const{name:t,link:s}=e,n=new class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardData=e,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_is-active")}_handleDeleteIcon(){this._cardElement.remove(),this._cardElement=null}_getCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getCardTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._addCardTitle=this._cardElement.querySelector(".card__title"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage.src=this._link,this._cardImage.alt=`A photo of ${this._name}`,this._addCardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}({name:t,link:s},"#card-template",(e=>{let{name:t,link:s}=e;d.open({name:t,link:s})}));return n.getView()},_=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Grand Teton",link:"https://source.unsplash.com/9nUcpfu476M/"},{name:"Antelope Canyon",link:"https://source.unsplash.com/7he8rO3qdsc"},{name:"Glacier National Park",link:"https://source.unsplash.com/qsngjpG5I5s"},{name:"Yosemite National Park",link:"https://source.unsplash.com/UCd78vfC8vU"},{name:"Rockey Mountain National Park",link:"https://source.unsplash.com/pq2DJBntZW0"},{name:"Zion National Park",link:"https://source.unsplash.com/tvg2AeJHfbM"}],renderer:e=>{_.addItem(m(e))}},"#card-section");_.renderItems();const h=new s({popupSelector:"#new-card-modal",handleFormSubmit:e=>{_.addItem(m(e))}});h.setEventListeners(),a.addEventListener("click",(function(){c.resetValidation(),h.open()}));const p=new s({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{u.setUserInfo(e)}});p.setEventListeners(),i.addEventListener("click",(function(){const e=u.getUserInfo();p.setInputValues(e),l.resetValidation(),p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMsV0FDMUMsTUFBTTRHLEVBQU9sRCxFQUFTSyxjQUN0QjRDLEVBQWlCMUQsZUFBZTJELEdBQ2hDckQsRUFBa0JsQyxrQkFDbEJzRixFQUFpQjlFLE1BQ25CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtSW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU3VibWl0SW5hY3RpdmVDbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybUlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1JbnB1dEVycm9yQWN0aXZlQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjYXBlID0gdGhpcy5faGFuZGxlRXNjYXBlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGUpO1xuICB9XG5cbiAgX2hhbmRsZUVzY2FwZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVQb3B1cENsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4gdGhpcy5faGFuZGxlUG9wdXBDbG9zZShldnQpKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyBJbml0aWFsIENhcmQgRGF0YVxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR3JhbmQgVGV0b25cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS85blVjcGZ1NDc2TS9cIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW50ZWxvcGUgQ2FueW9uXCIsXG4gICAgbGluazogXCJodHRwczovL3NvdXJjZS51bnNwbGFzaC5jb20vN2hlOHJPM3Fkc2NcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR2xhY2llciBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3NvdXJjZS51bnNwbGFzaC5jb20vcXNuZ2pwRzVJNXNcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tL1VDZDc4dmZDOHZVXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJvY2tleSBNb3VudGFpbiBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3NvdXJjZS51bnNwbGFzaC5jb20vcHEyREpCbnRaVzBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiWmlvbiBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3NvdXJjZS51bnNwbGFzaC5jb20vdHZnMkFlSkhmYk1cIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1JbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxuICBmb3JtU3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXG4gIGZvcm1TdWJtaXRJbmFjdGl2ZUNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGZvcm1JbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxuICBmb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBwcm9maWxlTmFtZTogXCIjcHJvZmlsZS1uYW1lXCIsXG4gIHByb2ZpbGVKb2I6IFwiI3Byb2ZpbGUtam9iXCIsXG4gIHByb2ZpbGVFZGl0TW9kYWw6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBwcmV2aWV3SW1hZ2VNb2RhbDogXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiLFxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgY2FyZFNlY3Rpb246IFwiI2NhcmQtc2VjdGlvblwiLFxuICBuZXdDYXJkTW9kYWw6IFwiI25ldy1jYXJkLW1vZGFsXCIsXG59O1xuXG4vLyogUHJvZmlsZSBFbGVtZW50c1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWZvcm1cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWpvYlwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcblxuLy8qIE5ldyBDYXJkIEVsZW1lbnRzXG5leHBvcnQgY29uc3QgbmV3Q2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1jYXJkLWZvcm1cIik7XG5leHBvcnQgY29uc3QgbmV3Q2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtYWRkLWJ1dHRvblwiKTtcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBuZXdDYXJkRm9ybSxcbiAgbmV3Q2FyZEFkZEJ1dHRvbixcbiAgc2VsZWN0b3JzLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vKiBGb3JtIFZhbGlkYXRvcnNcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBwcm9maWxlRWRpdEZvcm0pO1xuXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBuZXdDYXJkRm9ybSk7XG5cbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyogQ2xhc3Nlc1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlTmFtZSxcbiAgam9iU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlSm9iLFxufSk7XG5cbi8vKiBQcmV2aWV3IEltYWdlIFBvcHVwXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLnByZXZpZXdJbWFnZU1vZGFsLFxufSk7XG5cbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8qIFJlbmRlciB0aGUgQ2FyZHNcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGxpbmsgfSA9IGl0ZW07XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7IG5hbWUsIGxpbmsgfSwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSwgKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICAgIH0sXG4gIH0sXG4gIHNlbGVjdG9ycy5jYXJkU2VjdGlvblxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy8qIFByb2ZpbGUgQWRkIENhcmQgUG9wdXBcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLm5ld0NhcmRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGZvcm1EYXRhKSk7XG4gIH0sXG59KTtcblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbm5ld0NhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyogUHJvZmlsZSBFZGl0IFBvcHVwXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJvZmlsZUVkaXRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEpO1xuICB9LFxufSk7XG5cbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXMoaW5mbyk7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJldmlld01vZGFsSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiKTtcbiAgICB0aGlzLl9wcmV2aWV3TW9kYWxDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9wcmV2aWV3TW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wcmV2aWV3TW9kYWxJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3ByZXZpZXdNb2RhbEltYWdlLmFsdCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuXG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfZ2V0Q2FyZFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fYWRkQ2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gYEEgcGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG4gICAgdGhpcy5fYWRkQ2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiZm9ybUlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JtU3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImZvcm1TdWJtaXRJbmFjdGl2ZUNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImZvcm1JbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImZvcm1JbnB1dEVycm9yQWN0aXZlQ2xhc3MiLCJfZm9ybSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pbnB1dEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwiX2Rpc2FibGVCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjYXBlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJfaGFuZGxlUG9wdXBDbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZUVkaXRCdXR0b24iLCJuZXdDYXJkRm9ybSIsIm5ld0NhcmRBZGRCdXR0b24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwiY2FyZFByZXZpZXdQb3B1cCIsIl9wcmV2aWV3TW9kYWxJbWFnZSIsIl9wcmV2aWV3TW9kYWxDYXB0aW9uIiwibGluayIsInNyYyIsImFsdCIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiY2FyZCIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZERhdGEiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZExpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUljb24iLCJfY2FyZEVsZW1lbnQiLCJfaGFuZGxlRGVsZXRlSWNvbiIsIl9jYXJkSW1hZ2UiLCJ0b2dnbGUiLCJfZ2V0Q2FyZFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfYWRkQ2FyZFRpdGxlIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwicHJlcGVuZCIsImFkZENhcmRQb3B1cCIsImZvcm1EYXRhIiwiZWRpdFByb2ZpbGVQb3B1cCIsImluZm8iXSwic291cmNlUm9vdCI6IiJ9